<project name="offhand" default="build">
	<property name="lib" location="/usr/share/java"/>
	<property name="src" location="src"/>
	<property name="build" location="build"/>

	<path id="build.path">
		<fileset dir="${lib}">
			<include name="commons-collections3.jar"/>
			<include name="commons-logging.jar"/>
		</fileset>
	</path>

	<path id="test.path">
		<pathelement location="."/>
		<pathelement location="${build}"/>
		<path refid="build.path"/>
		<fileset dir="${lib}">
			<include name="log4j-1.2.jar"/>
		</fileset>
	</path>

	<target name="build">
		<mkdir dir="${build}"/>
		<javac srcdir="${src}" destdir="${build}" includeantruntime="false" debug="true">
			<classpath refid="build.path"/>
		</javac>
	</target>

	<target name="test" depends="build">
		<java classname="test.Main" fork="true">
			<classpath refid="test.path"/>
			<assertions>
				<enable/>
			</assertions>
		</java>
	</target>

	<target name="jar" depends="build">
		<jar jarfile="offhand.jar" basedir="${build}" excludes="test/**"/>
	</target>

	<target name="clean">
		<delete dir="${build}"/>
	</target>
</project>
